<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="موقع البحث عن الوظائف ونشرها - منصة شاملة للوظائف">
    <meta name="theme-color" content="#1976d2">
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="الوظائف">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getDatabase, ref, push, set, get, query, orderByChild, equalTo } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        window.firebaseConfig = {
            apiKey: "AIzaSyAGq9x3zOZXfqEZ3tMFRuUUTHnuHKNTRgI",
            authDomain: "pixelbuilder2-auth.firebaseapp.com",
            databaseURL: "https://pixelbuilder2-auth-default-rtdb.firebaseio.com",
            projectId: "pixelbuilder2-auth",
            storageBucket: "pixelbuilder2-auth.firebasestorage.app",
            messagingSenderId: "296299154171",
            appId: "1:296299154171:web:a4a68db29625b2d902fe5e",
            measurementId: "G-GGPBBJ2FYP"
        };
    </script>
    
    <title>الوظائف - منصة البحث عن الوظائف</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p>جاري التحميل...</p>
    </div>

    <!-- Install Banner -->
    <div id="install-banner" class="install-banner hidden">
        <div class="install-content">
            <i class="fas fa-mobile-alt"></i>
            <div class="install-text">
                <h3>تثبيت التطبيق</h3>
                <p>احصل على تجربة أفضل بتثبيت التطبيق على جهازك</p>
            </div>
            <div class="install-buttons">
                <button id="install-btn" class="btn-install">تثبيت</button>
                <button id="dismiss-btn" class="btn-dismiss">لاحقاً</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-brand">
                <i class="fas fa-briefcase"></i>
                <h1>الوظائف</h1>
            </div>
            
            <div class="nav-menu" id="nav-menu">
                <a href="#home" class="nav-link active">الرئيسية</a>
                <a href="#search" class="nav-link">البحث</a>
                <a href="#post-job" class="nav-link">نشر وظيفة</a>
                <a href="#profile" class="nav-link">الملف الشخصي</a>
                <a href="install.html" class="nav-link">تثبيت التطبيق</a>
            </div>
            
            <div class="nav-auth">
                <button id="login-btn" class="btn btn-outline">تسجيل الدخول</button>
                <button id="logout-btn" class="btn btn-primary hidden">تسجيل الخروج</button>
                <div id="user-menu" class="user-menu hidden">
                    <img id="user-avatar" class="user-avatar" src="" alt="User">
                    <span id="user-name" class="user-name"></span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
            
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-content">
                <h2>اعثر على الوظيفة المثالية</h2>
                <p>منصة شاملة للبحث عن أفضل الوظائف ونشر الوظائف المتاحة</p>
                
                <div class="search-box">
                    <div class="search-inputs">
                        <div class="search-group">
                            <i class="fas fa-search"></i>
                            <input type="text" id="job-search" placeholder="ابحث عن وظيفة...">
                        </div>
                        <div class="search-group">
                            <i class="fas fa-map-marker-alt"></i>
                            <input type="text" id="location-search" placeholder="المدينة أو المنطقة">
                        </div>
                    </div>
                    <button id="search-btn" class="btn btn-primary btn-large">
                        <i class="fas fa-search"></i>
                        بحث
                    </button>
                </div>
                
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-number" id="total-jobs">0</span>
                        <span class="stat-label">وظيفة متاحة</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="total-companies">0</span>
                        <span class="stat-label">شركة مسجلة</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="total-users">0</span>
                        <span class="stat-label">مستخدم</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Search Results Section -->
        <section id="search-section" class="search-section hidden">
            <div class="container">
                <div class="filters">
                    <h3>تصفية النتائج</h3>
                    <div class="filter-row">
                        <select id="category-filter">
                            <option value="">جميع التخصصات</option>
                            <option value="it">تقنية المعلومات</option>
                            <option value="marketing">التسويق</option>
                            <option value="sales">المبيعات</option>
                            <option value="hr">الموارد البشرية</option>
                            <option value="finance">المالية</option>
                            <option value="engineering">الهندسة</option>
                            <option value="design">التصميم</option>
                            <option value="education">التعليم</option>
                        </select>
                        
                        <select id="experience-filter">
                            <option value="">جميع مستويات الخبرة</option>
                            <option value="junior">مبتدئ</option>
                            <option value="mid">متوسط</option>
                            <option value="senior">خبير</option>
                            <option value="lead">كبير</option>
                        </select>
                        
                        <select id="salary-filter">
                            <option value="">جميع الرواتب</option>
                            <option value="0-3000">أقل من 3000 ريال</option>
                            <option value="3000-5000">3000 - 5000 ريال</option>
                            <option value="5000-8000">5000 - 8000 ريال</option>
                            <option value="8000-12000">8000 - 12000 ريال</option>
                            <option value="12000+">أكثر من 12000 ريال</option>
                        </select>
                    </div>
                </div>
                
                <div id="jobs-container" class="jobs-container">
                    <!-- Jobs will be loaded here -->
                </div>
                
                <div id="load-more-container" class="load-more-container hidden">
                    <button id="load-more-btn" class="btn btn-outline">تحميل المزيد</button>
                </div>
            </div>
        </section>

        <!-- Post Job Section -->
        <section id="post-job" class="post-job-section hidden">
            <div class="container">
                <div class="form-header">
                    <h2>نشر وظيفة جديدة</h2>
                    <p>احصل على أفضل المرشحين لوظيفتك</p>
                </div>
                
                <form id="job-form" class="job-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="job-title">عنوان الوظيفة *</label>
                            <input type="text" id="job-title" required>
                        </div>
                        <div class="form-group">
                            <label for="company-name">اسم الشركة *</label>
                            <input type="text" id="company-name" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="job-category">التخصص *</label>
                            <select id="job-category" required>
                                <option value="">اختر التخصص</option>
                                <option value="it">تقنية المعلومات</option>
                                <option value="marketing">التسويق</option>
                                <option value="sales">المبيعات</option>
                                <option value="hr">الموارد البشرية</option>
                                <option value="finance">المالية</option>
                                <option value="engineering">الهندسة</option>
                                <option value="design">التصميم</option>
                                <option value="education">التعليم</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="experience-level">مستوى الخبرة *</label>
                            <select id="experience-level" required>
                                <option value="">اختر مستوى الخبرة</option>
                                <option value="junior">مبتدئ (0-2 سنة)</option>
                                <option value="mid">متوسط (2-5 سنوات)</option>
                                <option value="senior">خبير (5+ سنوات)</option>
                                <option value="lead">كبير (إدارة)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="job-location">الموقع *</label>
                            <input type="text" id="job-location" placeholder="المدينة، المنطقة" required>
                        </div>
                        <div class="form-group">
                            <label for="salary-range">نطاق الراتب</label>
                            <select id="salary-range">
                                <option value="">غير محدد</option>
                                <option value="0-3000">أقل من 3000 ريال</option>
                                <option value="3000-5000">3000 - 5000 ريال</option>
                                <option value="5000-8000">5000 - 8000 ريال</option>
                                <option value="8000-12000">8000 - 12000 ريال</option>
                                <option value="12000+">أكثر من 12000 ريال</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="job-description">وصف الوظيفة *</label>
                        <textarea id="job-description" rows="6" placeholder="اكتب وصفاً شاملاً للوظيفة والمتطلبات..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="requirements">المتطلبات</label>
                        <textarea id="requirements" rows="4" placeholder="اذكر المتطلبات والمهارات المطلوبة..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="benefits">المزايا</label>
                        <textarea id="benefits" rows="3" placeholder="اذكر المزايا والفوائد..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="contact-email">البريد الإلكتروني للتواصل *</label>
                        <input type="email" id="contact-email" required>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large">
                            <i class="fas fa-paper-plane"></i>
                            نشر الوظيفة
                        </button>
                        <button type="button" id="cancel-job" class="btn btn-outline">إلغاء</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="profile-section hidden">
            <div class="container">
                <div class="profile-header">
                    <div class="profile-info">
                        <img id="profile-avatar" class="profile-avatar" src="" alt="Profile">
                        <div class="profile-details">
                            <h2 id="profile-name">غير محدد</h2>
                            <p id="profile-email">غير محدد</p>
                            <p id="profile-joined">انضم في: -</p>
                        </div>
                    </div>
                    <div class="profile-actions">
                        <button class="btn btn-outline">تعديل الملف</button>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="stat-card">
                        <h3>الوظائف المنشورة</h3>
                        <span id="posted-jobs-count">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>طلبات التقديم</h3>
                        <span id="applications-count">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>المفضلة</h3>
                        <span id="favorites-count">0</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Job Modal -->
    <div id="job-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-job-title"></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="job-meta">
                    <div class="meta-item">
                        <i class="fas fa-building"></i>
                        <span id="modal-company"></span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="modal-location"></span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-clock"></i>
                        <span id="modal-date"></span>
                    </div>
                </div>
                
                <div class="job-description">
                    <h4>وصف الوظيفة</h4>
                    <p id="modal-description"></p>
                </div>
                
                <div class="job-requirements">
                    <h4>المتطلبات</h4>
                    <p id="modal-requirements"></p>
                </div>
                
                <div class="job-benefits">
                    <h4>المزايا</h4>
                    <p id="modal-benefits"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="apply-btn" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i>
                    تقديم طلب
                </button>
                <button id="save-btn" class="btn btn-outline">
                    <i class="fas fa-heart"></i>
                    حفظ
                </button>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal hidden">
        <div class="modal-content auth-modal">
            <div class="modal-header">
                <h3 id="auth-modal-title">تسجيل الدخول</h3>
                <button class="modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <!-- Login Form -->
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-email">البريد الإلكتروني</label>
                        <input type="email" id="login-email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">كلمة المرور</label>
                        <input type="password" id="login-password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">تسجيل الدخول</button>
                </form>
                
                <!-- Register Form -->
                <form id="register-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="register-name">الاسم الكامل</label>
                        <input type="text" id="register-name" required>
                    </div>
                    <div class="form-group">
                        <label for="register-email">البريد الإلكتروني</label>
                        <input type="email" id="register-email" required>
                    </div>
                    <div class="form-group">
                        <label for="register-password">كلمة المرور</label>
                        <input type="password" id="register-password" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">تأكيد كلمة المرور</label>
                        <input type="password" id="confirm-password" required minlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">إنشاء حساب</button>
                </form>
                
                <div class="auth-switch">
                    <p id="switch-to-register">ليس لديك حساب؟ <a href="#" id="show-register">إنشاء حساب</a></p>
                    <p id="switch-to-login" class="hidden">لديك حساب بالفعل؟ <a href="#" id="show-login">تسجيل الدخول</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
